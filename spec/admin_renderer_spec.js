describe("AdminRenderer", function() {

  describe("render (integration)", function() {
    it("outputs content in a format convenient for admins", function() {
       var response = JSON.parse(JSON.stringify({
         "meta": {"page":1,"per_page":25,"total_items":5,"total_pages":1},
         "data":[
           {"project":{"id":10627,"name":"Quiksilver Pro Gold Coast","start_on":"2018-02-05","group":{"id":10015,"name":"Pivotal Labs"},"location":{"id":50,"name":"Tokyo"},"client_liaison":{"id":669,"name":"Heewon Choi"},"leadership_liaison":null,"product_liaison":null,"platform_architect":null,"contract_status":{"id":4,"name":"Booked"}},"slots":[{"id":96616,"start_on":"2018-02-05","finish_on":"2018-06-10","role":{"id":13,"name":"Designer"},"person":{"id":4345,"name":"Meghan Radke"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":true}]}]},{"id":96622,"start_on":"2018-03-12","finish_on":"2018-06-10","role":{"id":10,"name":"Developer"},"person":{"id":2531,"name":"Robert Gravina"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":96628,"start_on":"2018-02-12","finish_on":"2018-06-10","role":{"id":10,"name":"Developer"},"person":{"id":2569,"name":"Carlos Gavino"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":96637,"start_on":"2018-03-26","finish_on":"2018-06-10","role":{"id":16,"name":"Product Manager"},"person":{"id":2604,"name":"Eugene Fabian"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":144103,"start_on":"2018-02-05","finish_on":"2018-04-08","role":{"id":16,"name":"Product Manager"},"person":{"id":2385,"name":"Hadrien Raffalli"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]}]},
           {"project":{"id":10606,"name":"Rip Curl Pro Bells Beach","start_on":"2018-02-05","group":{"id":10015,"name":"Pivotal Labs"},"location":{"id":50,"name":"Tokyo"},"client_liaison":{"id":669,"name":"Heewon Choi"},"leadership_liaison":null,"product_liaison":null,"platform_architect":null,"contract_status":{"id":4,"name":"Booked"}},"slots":[]},
           {"project":{"id":10702,"name":"Margaret River Pro","start_on":"2018-03-12","group":{"id":10015,"name":"Pivotal Labs"},"location":{"id":50,"name":"Tokyo"},"client_liaison":{"id":669,"name":"Heewon Choi"},"leadership_liaison":null,"product_liaison":null,"platform_architect":null,"contract_status":{"id":4,"name":"Booked"}},"slots":[{"id":138202,"start_on":"2018-03-26","finish_on":"2018-06-24","role":{"id":10,"name":"Developer"},"person":{"id":2383,"name":"Ichizo Umehara"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":144310,"start_on":"2018-03-12","finish_on":"2018-06-24","role":{"id":13,"name":"Designer"},"person":{"id":6865,"name":"Mariam El Hussein"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":144319,"start_on":"2018-03-12","finish_on":"2018-06-24","role":{"id":16,"name":"Product Manager"},"person":{"id":2917,"name":"Yui Anzai"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]}]},
           {"project":{"id":10258,"name":"Surf Ranch Lemoore","start_on":"2017-11-20","group":{"id":10015,"name":"Pivotal Labs"},"location":{"id":50,"name":"Tokyo"},"client_liaison":{"id":669,"name":"Heewon Choi"},"leadership_liaison":null,"product_liaison":null,"platform_architect":null,"contract_status":{"id":4,"name":"Booked"}},"slots":[{"id":95059,"start_on":"2017-12-04","finish_on":"2018-04-15","role":{"id":10,"name":"Developer"},"person":{"id":2345,"name":"Derek Boire"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":95065,"start_on":"2018-01-15","finish_on":"2018-04-15","role":{"id":10,"name":"Developer"},"person":{"id":1900,"name":"Douglas Blumeyer"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":95068,"start_on":"2017-11-20","finish_on":"2018-04-15","role":{"id":16,"name":"Product Manager"},"person":{"id":3358,"name":"Mario Sakata"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]},{"id":143278,"start_on":"2017-11-20","finish_on":"2018-04-15","role":{"id":13,"name":"Designer"},"person":{"id":2835,"name":"Canyon Boak"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]}]}]},
           {"project":{"id":10159,"name":"Quiksilver Pro France","start_on":"2017-11-20","group":{"id":10015,"name":"Pivotal Labs"},"location":{"id":50,"name":"Tokyo"},"client_liaison":{"id":669,"name":"Heewon Choi"},"leadership_liaison":null,"product_liaison":null,"platform_architect":null,"contract_status":{"id":4,"name":"Booked"}},"slots":[{"id":94693,"start_on":"2017-11-20","finish_on":"2018-03-25","role":{"id":10,"name":"Developer"},"person":{"id":3113,"name":"Andrew Wright"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":false,"on_vacation":true},{"on_project":false,"on_vacation":true},{"on_project":false,"on_vacation":true},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]}]},{"id":94696,"start_on":"2017-12-04","finish_on":"2018-03-25","role":{"id":10,"name":"Developer"},"person":{"id":2477,"name":"Kyle Gearhart"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]}]},{"id":94702,"start_on":"2017-11-20","finish_on":"2018-03-25","role":{"id":13,"name":"Designer"},"person":{"id":2435,"name":"Erika Ito"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]}]},{"id":94705,"start_on":"2017-11-20","finish_on":"2018-03-25","role":{"id":16,"name":"Product Manager"},"person":{"id":2604,"name":"Eugene Fabian"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":true},{"on_project":true,"on_vacation":true},{"on_project":true,"on_vacation":true},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]}]},{"id":140338,"start_on":"2018-03-05","finish_on":"2018-03-25","role":{"id":10,"name":"Developer"},"person":{"id":2383,"name":"Ichizo Umehara"},"imported":false,"weeks":[{"start_on":"2018-03-19","days":[{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false},{"on_project":true,"on_vacation":false}]},{"start_on":"2018-03-26","days":[{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false},{"on_project":false,"on_vacation":false}]}]}]}
         ]
       }));
       var renderer = new AdminRenderer();
       var timelinesParser = new TimelinesParser();
       var deltaRecords = timelinesParser.parse(response.data)
       var result = deltaRecords.render(renderer);
       expect(result).toEqual("\"Date\", \"Name\", \"From\", \"To\"\r\n,\"Ichizo Umehara\",Quiksilver Pro France,Margaret River Pro\r\n,\"Erika Ito\",Quiksilver Pro France,\r\n,\"Kyle Gearhart\",Quiksilver Pro France,");
    });
  });

});

